CREATE TABLE admin (
    ad_id INT AUTO_INCREMENT PRIMARY KEY,
    ad_name VARCHAR(45) NOT NULL,
    ad_email VARCHAR(45) NOT NULL,
    ad_password VARCHAR(45) NOT NULL
);

CREATE TABLE car (
    car_id INT AUTO_INCREMENT PRIMARY KEY,
    car_licence VARCHAR(45) NOT NULL,
    car_type VARCHAR(45) NOT NULL
);

CREATE TABLE driver (
    dr_id INT AUTO_INCREMENT PRIMARY KEY,
    dr_name VARCHAR(45) NOT NULL,
    dr_phone VARCHAR(45) NOT NULL,
    dr_licence VARCHAR(45) NOT NULL,
    dr_address VARCHAR(45) NOT NULL,
    car_id INT NOT NULL,
    CONSTRAINT fk_driver_car FOREIGN KEY (car_id)
        REFERENCES car(car_id)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

CREATE TABLE route (
    ro_id INT AUTO_INCREMENT PRIMARY KEY,
    ro_number VARCHAR(45) NOT NULL,
    ro_start VARCHAR(45) NOT NULL,
    dr_id INT,
    car_id INT,
    ro_end VARCHAR(45) NOT NULL,
    CONSTRAINT fk_route_driver FOREIGN KEY (dr_id)
        REFERENCES driver(dr_id)
        ON DELETE SET NULL
        ON UPDATE CASCADE,
    CONSTRAINT fk_route_car FOREIGN KEY (car_id)
        REFERENCES car(car_id)
        ON DELETE SET NULL
        ON UPDATE CASCADE
);

CREATE TABLE student (
    s_id INT AUTO_INCREMENT PRIMARY KEY,
    s_name VARCHAR(45) NOT NULL,
    s_rollno VARCHAR(45) NOT NULL,
    year VARCHAR(45) NOT NULL,
    phone VARCHAR(45) NOT NULL,
    address VARCHAR(45) NOT NULL,
    pay_id INT,
    ro_id INT,
    gender VARCHAR(10) NOT NULL,
    CONSTRAINT fk_student_route FOREIGN KEY (ro_id)
        REFERENCES route(ro_id)
        ON DELETE SET NULL
        ON UPDATE CASCADE
);

CREATE TABLE payment (
    pay_id INT AUTO_INCREMENT PRIMARY KEY,
    pay_date DATE NOT NULL,
    pay_amount DECIMAL(7,2) NOT NULL,
    pay_type VARCHAR(45) NOT NULL,
    s_id INT,
    CONSTRAINT fk_payment_student FOREIGN KEY (s_id)
        REFERENCES student(s_id)
        ON DELETE SET NULL
        ON UPDATE CASCADE
);


ALTER TABLE student
ADD CONSTRAINT fk_pay_id
FOREIGN KEY (pay_id) REFERENCES payment(pay_id) 
ON DELETE CASCADE
ON UPDATE CASCADE;

---
ALTER TABLE payment
DROP FOREIGN KEY fk_payment_student;

ALTER TABLE payment
ADD CONSTRAINT fk_payment_student
FOREIGN KEY (s_id) REFERENCES student(s_id)
ON DELETE CASCADE
ON UPDATE CASCADE;
----

for route 
ALTER TABLE route DROP FOREIGN KEY fk_route_driver;

ALTER TABLE route
ADD CONSTRAINT fk_route_driver
FOREIGN KEY (dr_id) REFERENCES driver (dr_id)
ON DELETE CASCADE
ON UPDATE CASCADE;

git pw - @death_error21
